# Big_Data_Project-Sentiment_Analysis

## 项目来源

本项目中爬虫程序基于[EastMoney_Crawler](https://github.com/zcyeee/EastMoney_Crawler.gi)进行了优化，原项目由[原作者]开发，采用MIT许可证。

### 主要改进
- 优化了请求频率，将每页访问频率设定如下，能有效避免东方财富反扒机制带来的身份核验
        time.sleep(1.1 + random.random() * 0.6)  
  
- 在crawler.py里面添加以下代码，解决webdriver在启动过程中找不到驱动器，避免每次启动后需要需要等待几分钟才能开始爬虫任务的问题
       "service = Service(r"D:\浏览器下载\应用文件\chromedriver-win64\chromedriver-win64\chromedriver.exe")
        self.browser = webdriver.Chrome(options=options,service=service)"

- 改进了数据存储格式，原代码为每页帖子爬取后进行储存，然而MongoDB访问数据库频率过高可能导致数据爬取完后无法存入数据库的问题；因此本程序中将储存方式调整为每爬取大于等于600条帖子后再批次储存，避免该问题，代码如下：
        cache = []  # 缓存列表
        CACHE_SIZE = 600  # 每次调整600
        ...
        cache.extend(dic_list) # 在上面那边的添加完之后
                if len(cache) >= CACHE_SIZE:
                    postdb.insert_many(cache) # 减少访问频率，除此之外无变化
                    cache = []
————————————————————————————————————————————————————————————————分界线————————————————————————————————————————————————————————————————————————
**项目介绍**

一 研究问题
本研究通过东方财富网股吧标题文本构建情绪指数，分析其与半导体板块指数涨跌幅的相关性，验证投资者情绪对行业走势的影响。

二 研究数据介绍
股吧帖子标题：利用Python爬虫程序爬取19家上市半导体板块公司的从2022年7月至2025年11月末的帖子信息，原始数据约54.8万条。
板块情绪指数：本研究使用Hugging Face上的金融文本分析BERT模型，并于一定量用带标签样本进行LoRA微调后，对爬取帖子标题进行情绪文本转化。原模型含八种情绪，本研究对齐进一步划分为积极、中性、消极三类，并分别赋分1、0、-1。此外，对每家企业在股吧的所有帖子情绪得分加总后进行平均；并在企业市值取自然对数后，按个股市值对数对总对数值之和的比值对每家企业的每日平均情绪指数进行赋权，然后加总，用来代表本时间点的板块情绪指数。
半导体板块指数：从Wind数据库上导出自对应时间节点的半导体板块指数，代码为882121.WI。

三 研究方法
本文按照上诉数据处理方法后，分别用得到的当期情绪指数、滞后期情绪指数、当期以及滞后一期情绪指数、滞后情绪与滞后涨跌幅对板块指数每日涨跌幅进行基准回归。

四 研究结论
1、滞后一期情绪指数与板块涨跌幅无显著关联（p=0.625）；
2、当期情绪指数对板块走势具有显著正向影响（p=0.027）；
3、动量效应主导短期预测；滞后涨跌幅系数显著（p=0.005）；
4、解释力优于情绪因子；情绪传导路径验证；当期情绪+滞后情绪联合模型（p=0.06）显示情绪波动存在持续性影响。

五 相关图表
相关图表位于程序文件之中
